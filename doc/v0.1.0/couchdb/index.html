<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `couchdb` crate.">
    <meta name="keywords" content="rust, rustlang, rust-lang, couchdb">

    <title>couchdb - Rust</title>

    <link rel="stylesheet" type="text/css" href="../main.css">

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <section class="sidebar">
        
        <p class='location'></p><script>window.sidebarCurrent = {name: 'couchdb', ty: 'mod', relpath: '../'};</script>
    </section>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content mod">
<h1 class='fqn'><span class='in-band'>Crate <a class='mod' href=''>couchdb</a></span><span class='out-of-band'><span id='render-detail'>
            <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                [<span class='inner'>&#x2212;</span>]
            </a>
        </span><a id='src-0' class='srclink' href='../src/couchdb/lib.rs.html#1-159' title='goto source code'>[src]</a></span></h1>
<div class='docblock'><p>The couchdb crate is a thin wrapper around the CouchDB API, providing direct
access to individual CouchDB commands—e.g., PUT database, GET document, etc.</p>

<p>The couchdb crate provides a medium amount of type-safety. Applications get
and put documents as structured types, not raw strings, and other types,
such as revisions and views, are strongly typed as well. However, the
couchdb crate does not enforce a schema for document content. Applications
must ensure they use the correct names and types when getting and putting
documents, as any type-mismatch regarding document content will cause a
run-time error, such as a failure to encode or decode JSON.</p>

<p>To deal with JSON, the couchdb crate uses the <code>serde</code> traits <code>Serialize</code> and
<code>Deserialize</code>. These traits are fundamental to the couchdb crate&#39;s API and
are <em>not</em> mere implementation details. As such, applications must use these
traits when working with documents.</p>

<h1 id="example:-put-a-document-using-serde-macros" class='section-header'><a
                           href="#example:-put-a-document-using-serde-macros">Example: Put a document using serde macros</a></h1>
<p>Here&#39;s an example that creates a database named “cats” and puts a single
document into it.</p>
<pre class='rust rust-example-rendered'>
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>couchdb</span>;

<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Serialize</span>)]</span>
<span class='kw'>struct</span> <span class='ident'>Cat</span> {
    <span class='ident'>name</span>: <span class='ident'>String</span>,
    <span class='ident'>color</span>: <span class='ident'>String</span>,
    <span class='ident'>years_old</span>: <span class='ident'>u32</span>,
}

<span class='kw'>let</span> <span class='ident'>client</span> <span class='op'>=</span> <span class='ident'>couchdb</span>::<span class='ident'>Client</span>::<span class='ident'>new</span>(<span class='string'>&quot;http://your_database/&quot;</span>).<span class='ident'>unwrap</span>();

<span class='ident'>client</span>.<span class='ident'>put_database</span>(<span class='string'>&quot;cats&quot;</span>).<span class='ident'>run</span>().<span class='ident'>unwrap</span>();

<span class='kw'>let</span> <span class='ident'>doc</span> <span class='op'>=</span> <span class='ident'>Cat</span> {
    <span class='ident'>name</span>: <span class='string'>&quot;Nutmeg&quot;</span>.<span class='ident'>to_string</span>(),
    <span class='ident'>color</span>: <span class='string'>&quot;orange&quot;</span>.<span class='ident'>to_string</span>(),
    <span class='ident'>years_old</span>: <span class='number'>7</span>,
};
<span class='ident'>client</span>.<span class='ident'>put_document</span>(<span class='string'>&quot;cats&quot;</span>, <span class='string'>&quot;nutmeg&quot;</span>, <span class='kw-2'>&amp;</span><span class='ident'>doc</span>).<span class='ident'>run</span>().<span class='ident'>unwrap</span>();</pre>

<h1 id="example:-put-a-document-using-generic-json-placeholder" class='section-header'><a
                           href="#example:-put-a-document-using-generic-json-placeholder">Example: Put a document using generic JSON placeholder</a></h1>
<p>Here&#39;s the same example, using the generic <code>serde_json::Value</code> type instead
of the <code>Cat</code> type.</p>
<pre class='rust rust-example-rendered'>
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>couchdb</span>;
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>serde_json</span>;

<span class='kw'>let</span> <span class='ident'>client</span> <span class='op'>=</span> <span class='ident'>couchdb</span>::<span class='ident'>Client</span>::<span class='ident'>new</span>(<span class='string'>&quot;http://your_database/&quot;</span>).<span class='ident'>unwrap</span>();

<span class='ident'>client</span>.<span class='ident'>put_database</span>(<span class='string'>&quot;cats&quot;</span>).<span class='ident'>run</span>().<span class='ident'>unwrap</span>();

<span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>doc</span> <span class='op'>=</span> <span class='ident'>std</span>::<span class='ident'>collections</span>::<span class='ident'>BTreeMap</span>::<span class='op'>&lt;</span><span class='ident'>String</span>, <span class='ident'>serde_json</span>::<span class='ident'>Value</span><span class='op'>&gt;</span>::<span class='ident'>new</span>();
<span class='ident'>doc</span>.<span class='ident'>insert</span>(<span class='string'>&quot;name&quot;</span>.<span class='ident'>to_string</span>(), <span class='ident'>serde_json</span>::<span class='ident'>to_value</span>(<span class='kw-2'>&amp;</span><span class='string'>&quot;Nutmeg&quot;</span>));
<span class='ident'>doc</span>.<span class='ident'>insert</span>(<span class='string'>&quot;color&quot;</span>.<span class='ident'>to_string</span>(), <span class='ident'>serde_json</span>::<span class='ident'>to_value</span>(<span class='kw-2'>&amp;</span><span class='string'>&quot;orange&quot;</span>));
<span class='ident'>doc</span>.<span class='ident'>insert</span>(<span class='string'>&quot;years_old&quot;</span>.<span class='ident'>to_string</span>(), <span class='ident'>serde_json</span>::<span class='ident'>to_value</span>(<span class='kw-2'>&amp;</span><span class='number'>7</span>));

<span class='kw'>let</span> <span class='ident'>doc</span> <span class='op'>=</span> <span class='ident'>serde_json</span>::<span class='ident'>Value</span>::<span class='ident'>Object</span>(<span class='ident'>doc</span>);
<span class='ident'>client</span>.<span class='ident'>put_document</span>(<span class='string'>&quot;cats&quot;</span>, <span class='string'>&quot;nutmeg&quot;</span>, <span class='kw-2'>&amp;</span><span class='ident'>doc</span>).<span class='ident'>run</span>().<span class='ident'>unwrap</span>();</pre>

<p>This example works because the <code>serde_json::Value</code> type implements the
<code>Serialize</code> trait. Thus, the generic <code>Value</code> type allows an application to
avoid dealing with the serde macros to auto-derive the <code>Serialize</code> and
<code>Deserialize</code> traits.</p>

<h1 id="example:-get-a-document-using-serde-macros" class='section-header'><a
                           href="#example:-get-a-document-using-serde-macros">Example: Get a document using serde macros</a></h1>
<p>The API for getting documents is similar to putting documents. Here&#39;s an
example. </p>
<pre class='rust rust-example-rendered'>
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>couchdb</span>;

<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Deserialize</span>)]</span>
<span class='kw'>struct</span> <span class='ident'>Cat</span> {
    <span class='ident'>name</span>: <span class='ident'>String</span>,
    <span class='ident'>color</span>: <span class='ident'>String</span>,
    <span class='ident'>years_old</span>: <span class='ident'>u32</span>,
}

<span class='kw'>let</span> <span class='ident'>client</span> <span class='op'>=</span> <span class='ident'>couchdb</span>::<span class='ident'>Client</span>::<span class='ident'>new</span>(<span class='string'>&quot;http://your_database/&quot;</span>).<span class='ident'>unwrap</span>();

<span class='kw'>let</span> <span class='ident'>doc</span> <span class='op'>=</span> <span class='ident'>client</span>.<span class='ident'>get_document</span>::<span class='op'>&lt;</span><span class='ident'>Cat</span><span class='op'>&gt;</span>(<span class='string'>&quot;cats&quot;</span>, <span class='string'>&quot;nutmeg&quot;</span>).<span class='ident'>run</span>().<span class='ident'>unwrap</span>()
    .<span class='ident'>unwrap</span>().<span class='ident'>content</span>;

<span class='macro'>assert_eq</span><span class='macro'>!</span>(<span class='ident'>doc</span>.<span class='ident'>name</span>, <span class='string'>&quot;Nutmeg&quot;</span>.<span class='ident'>to_string</span>());
<span class='macro'>assert_eq</span><span class='macro'>!</span>(<span class='ident'>doc</span>.<span class='ident'>color</span>, <span class='string'>&quot;orange&quot;</span>.<span class='ident'>to_string</span>());
<span class='macro'>assert_eq</span><span class='macro'>!</span>(<span class='ident'>doc</span>.<span class='ident'>years_old</span>, <span class='number'>7</span>);</pre>

<p>Applications may use the generic <code>serde_json::Value</code> type for getting
documents, too.</p>

<h1 id="example:-construct-a-complex-couchdb-command" class='section-header'><a
                           href="#example:-construct-a-complex-couchdb-command">Example: construct a complex CouchDB command</a></h1>
<p>Applications build complex CouchDB commands one function call at a time,
adding non-default arguments as needed. Here&#39;s an example using
If-None-Match when getting a document to cause the server to return <code>304 Not Modified</code> in case of a match, which the couchdb crate returns as <code>None</code>.</p>
<pre class='rust rust-example-rendered'>
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>couchdb</span>;

<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Serialize</span>, <span class='ident'>Deserialize</span>)]</span>
<span class='kw'>struct</span> <span class='ident'>Cat</span> {
    <span class='ident'>name</span>: <span class='ident'>String</span>,
    <span class='ident'>color</span>: <span class='ident'>String</span>,
    <span class='ident'>years_old</span>: <span class='ident'>u32</span>,
}

<span class='kw'>let</span> <span class='ident'>client</span> <span class='op'>=</span> <span class='ident'>couchdb</span>::<span class='ident'>Client</span>::<span class='ident'>new</span>(<span class='string'>&quot;http://your_database/&quot;</span>).<span class='ident'>unwrap</span>();

<span class='kw'>let</span> <span class='ident'>doc</span> <span class='op'>=</span> <span class='ident'>Cat</span> {
    <span class='ident'>name</span>: <span class='string'>&quot;Nutmeg&quot;</span>.<span class='ident'>to_string</span>(),
    <span class='ident'>color</span>: <span class='string'>&quot;orange&quot;</span>.<span class='ident'>to_string</span>(),
    <span class='ident'>years_old</span>: <span class='number'>7</span>,
};
<span class='kw'>let</span> <span class='ident'>rev</span> <span class='op'>=</span> <span class='ident'>client</span>.<span class='ident'>put_document</span>(<span class='string'>&quot;cats&quot;</span>, <span class='string'>&quot;nutmeg&quot;</span>, <span class='kw-2'>&amp;</span><span class='ident'>doc</span>).<span class='ident'>run</span>().<span class='ident'>unwrap</span>();

<span class='kw'>let</span> <span class='ident'>doc</span> <span class='op'>=</span> <span class='ident'>client</span>.<span class='ident'>get_document</span>::<span class='op'>&lt;</span><span class='ident'>Cat</span><span class='op'>&gt;</span>(<span class='string'>&quot;cats&quot;</span>, <span class='string'>&quot;nutmeg&quot;</span>)
    .<span class='ident'>if_none_match</span>(<span class='ident'>rev</span>)
    .<span class='ident'>run</span>()
    .<span class='ident'>unwrap</span>();
<span class='macro'>assert</span><span class='macro'>!</span>(<span class='ident'>doc</span>.<span class='ident'>is_none</span>());</pre>
</div><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table>
                    <tr class=' module-item'>
                        <td><a class='mod' href='command/index.html'
                               title='couchdb::command'>command</a></td>
                        <td class='docblock short'>
                             <p>Sub-module for individual command types.</p>

                        </td>
                    </tr>
                </table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table>
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.Client.html'
                               title='couchdb::Client'>Client</a></td>
                        <td class='docblock short'>
                             <p>CouchDB client.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.Database.html'
                               title='couchdb::Database'>Database</a></td>
                        <td class='docblock short'>
                             <p>Database meta-information.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.Design.html'
                               title='couchdb::Design'>Design</a></td>
                        <td class='docblock short'>
                             <p>Design document content.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.Document.html'
                               title='couchdb::Document'>Document</a></td>
                        <td class='docblock short'>
                             <p>Document, including meta-information and content.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.ErrorResponse.html'
                               title='couchdb::ErrorResponse'>ErrorResponse</a></td>
                        <td class='docblock short'>
                             <p>Response content from the CouchDB server in case of error.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.Revision.html'
                               title='couchdb::Revision'>Revision</a></td>
                        <td class='docblock short'>
                             <p>Document revision.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.Server.html'
                               title='couchdb::Server'>Server</a></td>
                        <td class='docblock short'>
                             <p>RAII wrapper for running a CouchDB server process.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.ViewFunction.html'
                               title='couchdb::ViewFunction'>ViewFunction</a></td>
                        <td class='docblock short'>
                             <p>View function.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.ViewResult.html'
                               title='couchdb::ViewResult'>ViewResult</a></td>
                        <td class='docblock short'>
                             <p>View result.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.ViewRow.html'
                               title='couchdb::ViewRow'>ViewRow</a></td>
                        <td class='docblock short'>
                             <p>View row.</p>

                        </td>
                    </tr>
                </table><h2 id='enums' class='section-header'><a href="#enums">Enums</a></h2>
<table>
                    <tr class=' module-item'>
                        <td><a class='enum' href='enum.Error.html'
                               title='couchdb::Error'>Error</a></td>
                        <td class='docblock short'>
                             <p>Principal error type.</p>

                        </td>
                    </tr>
                </table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table>
                    <tr class=' module-item'>
                        <td><a class='trait' href='trait.IntoUrl.html'
                               title='couchdb::IntoUrl'>IntoUrl</a></td>
                        <td class='docblock short'>
                             <p>Trait for converting some types into a URI.</p>

                        </td>
                    </tr>
                </table><h2 id='types' class='section-header'><a href="#types">Type Definitions</a></h2>
<table>
                    <tr class=' module-item'>
                        <td><a class='type' href='type.ViewFunctionMap.html'
                               title='couchdb::ViewFunctionMap'>ViewFunctionMap</a></td>
                        <td class='docblock short'>
                             <p>Associative collection for view functions.</p>

                        </td>
                    </tr>
                </table></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <div id="help" class="hidden">
        <div>
            <div class="shortcuts">
                <h1>Keyboard Shortcuts</h1>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                </dl>
            </div>

            <div class="infos">
                <h1>Search Tricks</h1>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>typedef</code> (or
                    <code>tdef</code>).
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code>)
                </p>
            </div>
        </div>
    </div>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "couchdb";
        window.playgroundUrl = "";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    
    <script async src="../search-index.js"></script>
</body>
</html>